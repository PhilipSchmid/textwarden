# SwiftLint Configuration for TextWarden
# Balanced rules that catch real issues without being overly pedantic

# Paths to include for linting
included:
  - Sources
  - Tests

# Paths to exclude from linting
excluded:
  - Pods
  - .build
  - DerivedData
  - GrammarEngine
  - Sources/GrammarBridge/SwiftBridgeCore.swift   # Auto-generated FFI code
  - Sources/GrammarBridge/GrammarEngineFFI.swift  # Auto-generated FFI code

# Disabled rules (with justification)
disabled_rules:
  # Style preferences handled by SwiftFormat
  - line_length             # Handled by SwiftFormat
  - opening_brace           # Handled by SwiftFormat
  - trailing_comma          # Style preference
  - vertical_whitespace     # Handled by SwiftFormat

  # Development conveniences
  - todo                    # Allow TODO comments during development
  - identifier_name         # Allow short names like i, x, y, id

  # Complex code patterns that are intentional
  - large_tuple             # Sometimes needed for complex returns
  - nesting                 # Deep nesting sometimes necessary in UI code
  - for_where               # Style preference

  # Length/complexity rules - disabled because this codebase has intentionally
  # complex, cohesive modules (UI components, AX strategies, content parsers)
  # that would lose clarity if artificially split. Code review catches issues.
  - file_length             # Many files are large but logically cohesive
  - type_body_length        # Complex UI classes need many methods
  - function_body_length    # Some functions have complex but linear logic
  - cyclomatic_complexity   # State machines and AX handling are inherently complex

  # SwiftUI patterns
  - multiple_closures_with_trailing_closure  # SwiftUI animation syntax uses this

  # Dependency injection pattern
  - function_parameter_count  # DI containers need many parameters by design

  # AX API requirements - CFTypeRef conversions require force casts
  - force_cast              # Required for Accessibility API CFTypeRef handling

# Opt-in rules (useful but not default)
opt_in_rules:
  - closure_end_indentation
  - closure_spacing
  - empty_count
  - empty_string
  - first_where
  - last_where
  - multiline_parameters
  - overridden_super_call
  - redundant_nil_coalescing
  - unneeded_parentheses_in_closure_argument

# Rule configurations

force_try:
  severity: warning

type_name:
  min_length: 2
  max_length: 50

# Downgrade shorthand_operator to warning (Text concatenation can't use +=)
shorthand_operator:
  severity: warning

# Custom rules
custom_rules:
  no_print:
    name: "No Print Statements"
    regex: '(?<!//\s)print\('
    message: "Use Logger instead of print for logging"
    severity: warning
    excluded: "Tests/.*"  # print() is acceptable in tests
